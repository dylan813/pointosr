<launch>
    <!-- ========== Launch classification_node.py ========== -->
    <!-- Config for PointNext model architecture -->
    <arg name="cfg_path" default="$(find pointosr)/pointnext/cfgs/pointnext-s.yaml" />
    <!-- Model checkpoint directory-->
    <arg name="model_path" default="/home/cerlab/Documents/data/pointosr/pointosr_log/ablation_logs/bs32_vbs32/checkpoint/cfgs-train-pointnext-s-ngpus1-seed42-20250824-130842-fzwiyYEtV7a4GyHM2H48rq_ckpt_best.pth" />
    
    <!-- Parameters -->    
    <arg name="num_points" default="2048" />    <!-- Dependent on max point cloud size during training -->
    <arg name="max_cluster_topics" default="30" />
    <arg name="debug_logging" default="false" />   <!-- Enable detailed debug logging -->
    
    <!-- OSR (Open Set Recognition) Parameters -->
    <arg name="enable_osr" default="true" />    <!-- Enable/disable OSR for OOD detection -->
    <arg name="fusion_config_path" default="$(find pointosr)/osr/calibration/fusion_config.json" />
    <arg name="stats_path" default="$(find pointosr)/osr/calibration/stats.json" />
    <arg name="prototypes_path" default="$(find pointosr)/osr/prototypes" />

    <!-- Keep defaults -->
    <arg name="input_topic_prefix" default="/cluster_" />
    <arg name="trigger_topic" default="/motion_detector/cluster_batch" />
    <arg name="device" default="cuda" />

    <node name="pointosr_live_classification" pkg="pointosr_ros" type="classification_node.py" output="screen">
        <param name="cfg_path" value="$(arg cfg_path)" />
        <param name="model_path" value="$(arg model_path)" />
        <param name="num_points" value="$(arg num_points)" />
        <param name="max_cluster_topics" value="$(arg max_cluster_topics)" />
        <param name="input_topic_prefix" value="$(arg input_topic_prefix)" />
        <param name="trigger_topic" value="$(arg trigger_topic)" />
        <param name="device" value="$(arg device)" />
        <param name="debug_logging" value="$(arg debug_logging)" />
        
        <!-- OSR Parameters -->
        <param name="enable_osr" value="$(arg enable_osr)" />
        <param name="fusion_config_path" value="$(arg fusion_config_path)" />
        <param name="stats_path" value="$(arg stats_path)" />
        <param name="prototypes_path" value="$(arg prototypes_path)" />
    </node>
</launch> 